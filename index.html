<!DOCTYPE html>
<html lang="sv">
<head>
  <!-- DataLayer init (måste ligga före GTM) -->
  <script>
    window.dataLayer = window.dataLayer || [];
    (function(){
      var env = /localhost|127\.0\.0\.1|staging/i.test(location.host) ? 'dev' : 'prod';
      window.dataLayer.push({
        event: 'page_view',
        page: {
          url: location.href,
          path: location.pathname,
          title: document.title,
          language: document.documentElement.lang
        },
        site: { name: 'Tova Persson Portfolio', env: env }
      });
    })();
  </script>

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-KBG4JPKN');</script>
  <!-- End Google Tag Manager -->

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tova Persson</title>
  <meta name="description" content="Portfolio för Tova Persson – marknadsföring, kampanjer och case." />
  <meta name="color-scheme" content="light dark" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,600&display=swap" rel="stylesheet">

  <!-- Preload Maragsa -->
  <link rel="preload" href="assets/fonts/Maragsa.woff2" as="font" type="font/woff2" crossorigin>

  <style>
    @font-face{ font-family:'Maragsa'; src:url('assets/fonts/Maragsa.woff2') format('woff2'), url('assets/fonts/Maragsa.woff') format('woff'); font-weight:400; font-style:normal; font-display:swap; }
    @font-face{ font-family:'Garet'; src:url('assets/fonts/Garet-Book.woff2') format('woff2'), url('assets/fonts/Garet-Book.woff') format('woff'); font-weight:400; font-style:normal; font-display:swap; }
    @font-face{ font-family:'Garet'; src:url('assets/fonts/Garet-Heavy.woff2') format('woff2'), url('assets/fonts/Garet-Heavy.woff') format('woff'); font-weight:700; font-style:normal; font-display:swap; }

    :root{
      --bg:#f7f7f7; --fg:#0a0a0a; --muted:#6b7280; --line:#e5e7eb;
      --card:#ffffff; --accent:#0a0a0a; --burgundy:#800020; --radius:14px;
      --topbar-h: 44px;
      --hero-gap: clamp(0px, 0.5vh, 10px);
      --ink:#1221a5;
    }
    @media (prefers-color-scheme: dark){
      :root{ --bg:#0b0b0b; --fg:#f5f5f5; --muted:#a3a3a3; --line:#1f2937; --card:#101010; --accent:#f5f5f5 }
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{ margin:0; background:var(--bg); color:var(--fg); font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; line-height:1.6 }
    img{max-width:100%;display:block}
    a{color:inherit;text-decoration:none}
    a:hover{text-decoration:none}

    .wrap{ display:block; min-height:100svh }
    main{ padding: 24px clamp(16px,6vw,96px); }

    /* ===== TOPPMENY ===== */
    .top-location{
      position:fixed; top:0; left:0; right:0; z-index:9999;
      border-bottom:1px solid var(--line);
      background:color-mix(in srgb, var(--bg) 92%, #fff 8%);
      padding:0;
    }
    .topbar{
      display:flex; justify-content:center; align-items:center;
      padding:16px 24px; max-width:100%;
      overflow-x:auto; -webkit-overflow-scrolling:touch;
    }
    .topmenu{
      display:flex; align-items:center; flex-wrap:nowrap; white-space:nowrap;
      gap:clamp(18px, 4vw, 56px);
      width:max-content;
      margin:0 auto;
    }
    .topmenu a, .topmenu .loc{
      text-transform:uppercase;
      letter-spacing:.35em;
      font-size:clamp(10px, 1.0vw, 14px);
      color:var(--muted);
      text-align:center;
    }
    .topmenu a:hover{ color:var(--fg) }

    .full-bleed{ width:90vw; margin-left:calc(50% - 50vw); }

    /* Centra bannern under porträttet exakt */
    .masthead .full-bleed{ width:90vw; margin:0 auto; }
    .masthead .full-bleed img{ display:block; margin:0 auto; }

    .name{
      font-family:'Maragsa', Georgia, 'Times New Roman', serif;
      font-weight:400; letter-spacing:.04em; text-transform:capitalize;
      line-height:.9; font-size: clamp(64px, 22vw, 360px);
      white-space: nowrap; margin:0; text-align:center;
    }

    .about{ max-width: 70ch; margin: 0 auto; color:var(--fg) }
    .divider{ border-top:1px solid var(--line); margin: 28px 0 }

    .link-row{ display:flex; gap:18px; flex-wrap:wrap; align-items:center }
    .link-row a{ letter-spacing:.25em; text-transform:uppercase; font-size:12px; padding:10px 0 }

    .projects{ display:grid; grid-template-columns: repeat(3,1fr); gap:14px; margin-top:18px }
    @media (max-width: 1100px){ .projects{ grid-template-columns: repeat(2,1fr) } }
    @media (max-width: 640px){ .projects{ grid-template-columns: 1fr } }
    .card{ border:1px solid var(--line); border-radius:var(--radius); background:#fff; overflow:hidden }
    .thumb{ width:100%; aspect-ratio: 3 / 2; object-fit: cover; background:#ddd; display:block; height:auto; }
    .pad{ padding:12px 14px }
    .title{ margin:0; font-size:16px }
    .muted{ color:var(--muted) }

    .possible-ring{ padding-top:0; padding-bottom:0; }
    .ring{
      width:min(1200px,92vw); margin-inline:auto;
      display:grid;
      grid-template-columns: 1fr auto 1fr;
      grid-template-rows: auto auto auto;
      grid-template-areas:
        ".    top     ."
        "left title  right"
        ".   bottom  .";
      gap:clamp(16px,4vw,40px);
      align-items:center; justify-items:center;
    }
    .possible-big{
      grid-area:title;
      font-family:'Playfair Display',serif;
      font-weight:700; line-height:.9; letter-spacing:-.01em;
      font-size:clamp(52px,12svh,18svh);
      margin:0; text-align:center;
    }
    .stack{
      list-style:none; margin:0; padding:0;
      display:flex; flex-direction:column; gap:10px;
      font-family:'Playfair Display', serif; font-weight:600; font-style:italic;
      font-size:clamp(14px, 1.9vw, 24px); line-height:1.25;
      color:color-mix(in srgb, var(--fg) 92%, #000 8%); text-align:center;
    }
    .stack-top{ grid-area:top; }
    .stack-bottom{ grid-area:bottom; }
    .stack-left{ grid-area:left; text-align:right; align-items:flex-end; }
    .stack-right{ grid-area:right; align-items:flex-start; }
    @media (max-width: 900px){
      .ring{
        grid-template-columns:1fr;
        grid-template-areas:"title" "top" "left" "right" "bottom";
      }
      .stack-left,.stack-right{ text-align:center; align-items:center; }
    }

    /* ====== BANNER ====== */
    #promo .frame{ aspect-ratio:21/9; width:100%; overflow:hidden; border-radius:12px; border:1px solid var(--line); position:relative; }
    #promo .overlay{
      position:absolute; right:clamp(16px,4vw,56px); bottom:clamp(16px,4vw,56px);
      width:min(560px, 40vw); max-width:90%; z-index:2;
      height:clamp(260px, 45vh, 560px); display:flex;
    }
    #promo .cta-list{
      list-style:none; margin:0; padding:0 0 clamp(8px,1.6vh,18px) 0; width:100%;
      display:flex; flex-direction:column; justify-content:flex-end; gap:clamp(6px,1.2vh,12px); height:100%;
    }
    #promo .cta-list li{ text-align:right; }
    #promo .cta-list a{
      display:inline-block;
      color:#fff; text-decoration:none;
      font-family:'Garet', Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
      text-transform:uppercase; letter-spacing:.28em; font-weight:700;
      font-size:clamp(16px, 2.2vw, 40px);
      padding:.15em 0 .35em;
      text-align:right; text-shadow:0 2px 4px rgba(0,0,0,.35);
      border-bottom:2px solid rgba(255,255,255,.98);
    }
    #promo .cta-list li:last-child a{ border-bottom:none; }
    #promo .cta-list a:hover{ opacity:.92; transform:translateX(-3px); transition:.15s ease; }

    @media (max-width: 640px){
      #promo .overlay{ left:12px; right:12px; width:auto; height:auto; }
      #promo .cta-list{ justify-content:flex-end; gap:10px; }
      #promo .cta-list li{ text-align:center; }
      #promo .cta-list a{ text-align:center; letter-spacing:.22em; }
    }

    html, body { height: 100%; }
    html { scroll-snap-type: y mandatory; overscroll-behavior-y: contain; }
    .page{
      min-height: 100svh; scroll-snap-align: start; scroll-margin-top: calc(var(--topbar-h) + 12px);
      display: grid; align-content: center; padding-block: clamp(24px, 6vw, 64px);
    }
    .divider{ display:none; }
    @media (max-width: 640px), (prefers-reduced-motion: reduce){
      html { scroll-snap-type: none; }
      .page{ min-height:auto; }
      .divider{ display:block; }
    }

    :focus-visible{ outline:2px dashed color-mix(in srgb, var(--fg) 70%, transparent); outline-offset:3px; border-radius:8px }

    /* ===== PROJECTS: kompakt så sektionen ryms i en “sida” ===== */
    #projects.page{ padding-block: clamp(8px, 4vh, 28px); }
    #projects .kicker{ font-size:clamp(12px,1.6vw,16px); letter-spacing:.35em; }
    #projects .projects{ gap:12px; margin-top:10px; }
    #projects .thumb{ aspect-ratio: 21 / 9; }
    #projects .card{ border-radius:12px; }
    #projects .pad{ padding:8px 10px; }
    #projects .title{ font-size:14px; }
    #projects .muted{ font-size:12px; }
    @media (max-width:1100px){ #projects .projects{ grid-template-columns: repeat(2,1fr); } }
    @media (max-width:640px){ #projects .projects{ grid-template-columns: 1fr; }
      #projects .thumb{ aspect-ratio: 16 / 9; } }
  </style>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KBG4JPKN"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <!-- TOPPMENY -->
  <div class="top-location" role="navigation" aria-label="Huvudmeny">
    <div class="topbar">
      <nav class="topmenu" aria-label="Huvudlänkar">
        <span class="loc">LOCATION — Stockholm, Sweden</span>
        <a href="#about"    data-gtm="nav">About me</a>
        <a href="#projects" data-gtm="nav">Projects / Archive</a>
        <a href="#possible" data-gtm="nav">What I Do</a>
        <a href="#promo"    data-gtm="nav">Contact Me</a>
      </nav>
    </div>
  </div>

  <div class="wrap">
    <main>

      <!-- MASTHEAD -->
      <section class="masthead page" aria-label="Masthead"
        style="display:flex; flex-direction:column; align-items:center; gap:0; padding-top:calc(var(--topbar-h) + var(--hero-gap)); min-height:auto;">
        <figure style="margin:0 0 var(--hero-gap) 0;">
          <img src="DSC_2849.JPG" alt="Tova Persson porträtt"
               style="width:min(36vw, 420px); height:auto; border-radius:12px; border:1px solid var(--line); display:block;">
        </figure>

        <div class="full-bleed">
          <img src="banner.png" alt="Tova Persson — banner" style="width:100%;height:auto;display:block;">
        </div>
      </section>

      <!-- ABOUT -->
      <section id="about" class="page" aria-labelledby="about-h" style="text-align:center;">
        <h2 id="about-h" class="kicker" style="margin:0 0 10px">A B O U T  M E</h2>
        <p class="about">
          Jag arbetar med marknadsföring och kampanjer – från idé och strategi till produktion och rollout.
          Jag gillar tydliga budskap, enkel grafisk form och mätbara resultat.
        </p>
      </section>

      <!-- PROJECTS -->
      <section id="projects" class="page" aria-labelledby="projects-h">
        <div class="link-row">
          <h2 id="projects-h" class="kicker" style="margin:0">P R O J E C T S  /  A R C H I V E</h2>
          <a href="#" class="muted" data-gtm="projects_all">Se allt →</a>
        </div>

        <div class="projects" role="list">
          <article class="card" role="listitem">
            <img class="thumb" src="DSC_Fotografiska.jpeg" alt="Projekt 1" loading="lazy">
            <div class="pad">
              <p class="title">Kampanj – vårkollektion</p>
              <p class="muted">Paid social · Retail</p>
            </div>
          </article>

          <article class="card" role="listitem">
            <img class="thumb" src="DSC_whatever.jpeg" alt="Projekt 2" loading="lazy">
            <div class="pad">
              <p class="title">Lookbook / Editorial</p>
              <p class="muted">Content · AD</p>
            </div>
          </article>

          <article class="card" role="listitem">
            <img class="thumb" src="DSC_Astrid.jpeg" alt="Projekt 3" loading="lazy">
            <div class="pad">
              <p class="title">Flagship Window</p>
              <p class="muted">VM · Scenografi</p>
            </div>
          </article>

          <article class="card" role="listitem">
            <img class="thumb" src="Some.jpeg" alt="Projekt – SOME" loading="lazy">
            <div class="pad">
              <p class="title">Projekt – SOME</p>
              <p class="muted">Social · Koncept</p>
            </div>
          </article>

          <article class="card" role="listitem">
            <img class="thumb" src="absolut.jpeg" alt="Projekt – Absolut" loading="lazy">
            <div class="pad">
              <p class="title">Projekt – Absolut</p>
              <p class="muted">Kampanj · Art Direction</p>
            </div>
          </article>

          <article class="card" role="listitem">
            <img class="thumb" src="ouai.jpeg" alt="Projekt – OUAI" loading="lazy">
            <div class="pad">
              <p class="title">Projekt – OUAI</p>
              <p class="muted">Retail · Content</p>
            </div>
          </article>
        </div>
      </section>

      <!-- WHAT’S POSSIBLE TOGETHER -->
      <section id="possible" class="page possible-ring" aria-labelledby="possible-h">
        <div class="ring">
          <ul class="stack stack-top" role="list" aria-label="Kompetenser topp">
            <li>SEO / SEM</li>
            <li>Website Design &amp; Development</li>
            <li>Content Writing</li>
            <li>Social Media Management &amp; Ad Campaigns</li>
          </ul>

          <h2 id="possible-h" class="possible-big">
            What’s<br>Possible<br>Together
          </h2>

          <ul class="stack stack-right" role="list" aria-label="Kompetenser höger">
            <li>SEO / SEM</li>
            <li>Website Design &amp; Development</li>
            <li>Content Writing</li>
            <li>Social Media Management &amp; Ad Campaigns</li>
          </ul>

          <ul class="stack stack-left" role="list" aria-label="Kompetenser vänster">
            <li>SEO / SEM</li>
            <li>Website Design &amp; Development</li>
            <li>Content Writing</li>
            <li>Social Media Management &amp; Ad Campaigns</li>
          </ul>

          <ul class="stack stack-bottom" role="list" aria-label="Kompetenser botten">
            <li>SEO / SEM</li>
            <li>Website Design &amp; Development</li>
            <li>Content Writing</li>
            <li>Social Media Management &amp; Ad Campaigns</li>
          </ul>
        </div>

        <!-- Centrera ALLT i ringen, även vänster/höger-listor -->
        <style>
          #possible .ring{ justify-items:center; align-items:center; margin-inline:auto }
          #possible .possible-big{ text-align:center; justify-self:center }
          #possible .stack{ text-align:center; align-items:center; margin-inline:auto; width:100%; max-width:720px }
          #possible .stack-left, #possible .stack-right{ text-align:center !important; align-items:center !important }
        </style>
      </section>

      <!-- BANNER -->
      <section id="promo" class="page" aria-label="Banner"
        style="width:100vw;margin-left:50%;transform:translateX(-50%);position:relative;">
        <div class="frame">
          <img src="you.png" alt="Banner" style="width:100%;height:100%;object-fit:cover;display:block;">
          <div class="overlay" aria-label="Snabblänkar">
            <ul class="cta-list">
              <li><a href="mailto:tova.epersson@gmail.com" data-gtm="cta">Contact me</a></li>
              <li><a href="Tova_Persson_CV.pdf" download="Tova_Persson_CV.pdf" data-gtm="cta">Resume</a></li>
              <li><a href="https://www.linkedin.com/in/tovas" target="_blank" rel="noopener" data-gtm="cta">LinkedIn</a></li>
            </ul>
          </div>
        </div>
      </section>

      <!-- (Kontaktsektionen borttagen) -->

      <footer>© <span id="year"></span> Tova Persson</footer>
    </main>
  </div>

  <script>
    function setTopbarHeight(){
      const bar = document.querySelector('.top-location');
      if(bar){ document.documentElement.style.setProperty('--topbar-h', bar.offsetHeight + 'px'); }
    }
    setTopbarHeight();
    window.addEventListener('resize', setTopbarHeight);
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <!-- Tracking: link clicks, project impressions/clicks, scroll depth -->
  <script>
    // ---- Link click tracking (nav, CTA, outbound, download, mailto) ----
    document.addEventListener('click', function (e) {
      const a = e.target.closest('a');
      if (!a) return;

      const href = a.getAttribute('href') || '';
      const label = (a.textContent || '').trim();
      const isMailto   = href.startsWith('mailto:');
      const isDownload = a.hasAttribute('download') || /\.(pdf|docx?|xlsx?|pptx?|zip)$/i.test(href);
      const isHttp     = /^https?:\/\//i.test(href);
      const isOutbound = isHttp && a.host && a.host !== location.host;
      const section =
        a.dataset.gtm ||
        (a.closest('.topmenu') ? 'nav' : (a.closest('.cta-list') ? 'cta' : null));

      window.dataLayer.push({
        event: 'link_click',
        link: {
          label: label || href,
          url: href,
          section: section,
          outbound: !!isOutbound,
          download: !!isDownload,
          mailto: !!isMailto
        }
      });
    }, { capture: true });

    // ---- Project impressions (once per kort) + klick ----
    (function trackProjectImpressions() {
      const container = document.querySelector('#projects');
      const cards = container ? container.querySelectorAll('.card') : [];
      if (!('IntersectionObserver' in window) || !cards.length) return;

      const seen = new WeakSet();
      const obs = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting && !seen.has(entry.target)) {
            seen.add(entry.target);
            const title = entry.target.querySelector('.title')?.textContent?.trim() || 'Untitled';
            window.dataLayer.push({
              event: 'project_impression',
              project: { title: title }
            });
          }
        });
      }, { threshold: 0.5 });

      cards.forEach(c => obs.observe(c));

      container.addEventListener('click', (e) => {
        const card = e.target.closest('.card');
        if (!card) return;
        const title = card.querySelector('.title')?.textContent?.trim() || 'Untitled';
        window.dataLayer.push({
          event: 'project_click',
          project: { title: title }
        });
      });
    })();

    // ---- Global scroll depth (25/50/75/100%) ----
    (function trackScrollDepth() {
      const marks = new Set();
      const points = [25, 50, 75, 100];

      function check() {
        const doc = document.documentElement;
        const max = doc.scrollHeight - doc.clientHeight;
        if (max <= 0) return;
        const pct = Math.round((doc.scrollTop / max) * 100);

        points.forEach(p => {
          if (pct >= p && !marks.has(p)) {
            marks.add(p);
            window.dataLayer.push({ event: 'scroll_depth', scroll: { percent: p } });
          }
        });

        if (marks.size === points.length) window.removeEventListener('scroll', onScroll);
      }

      const onScroll = () => { requestAnimationFrame(check); };
      window.addEventListener('scroll', onScroll, { passive: true });
      check(); // initial
    })();
  </script>

  <!-- NEW: Tid i sektion + scrolldjup per sektion -->
  <script>
    (function sectionMetrics(){
      // Välj sektioner att mäta
      const sectionIds = ['about','projects','possible','promo'];
      const sections = sectionIds.map(id => document.getElementById(id)).filter(Boolean);
      if (!sections.length) return;

      // ---- TID I SEKTION (≥50% i vy) ----
      let active = null, start = 0;
      const timeObserver = new IntersectionObserver((entries) => {
        entries.forEach((e) => {
          const id = e.target.id;
          if (e.isIntersecting && e.intersectionRatio >= 0.5) {
            // avsluta tidigare
            if (active && active !== id) {
              const spent = Math.round((performance.now() - start) / 1000);
              window.dataLayer.push({ event: 'section_time', section: active, seconds: spent });
            }
            if (active !== id) { active = id; start = performance.now(); }
          } else if (active === id && e.intersectionRatio < 0.5) {
            const spent = Math.round((performance.now() - start) / 1000);
            window.dataLayer.push({ event: 'section_time', section: id, seconds: spent });
            active = null;
          }
        });
      }, { threshold: [0, 0.5, 1] });
      sections.forEach(s => timeObserver.observe(s));

      window.addEventListener('beforeunload', () => {
        if (active) {
          const spent = Math.round((performance.now() - start) / 1000);
          window.dataLayer.push({ event: 'section_time', section: active, seconds: spent });
        }
      });

      // ---- SCROLLDJUP PER SEKTION (25/50/75/100%) ----
      const points = [25, 50, 75, 100];
      const marks = new Map(sections.map(s => [s.id, new Set()]));

      function checkSectionDepth() {
        const st = document.documentElement.scrollTop || document.body.scrollTop;
        const vh = window.innerHeight || document.documentElement.clientHeight;

        sections.forEach(sec => {
          const rect = sec.getBoundingClientRect();
          const secTop = st + rect.top;
          const secH = sec.offsetHeight || rect.height;
          const denom = Math.max(1, secH - vh); // undvik /0 för korta sektioner

          // progress ~ var i sektionen viewporten befinner sig
          const progress = Math.max(0, Math.min(1, (st - secTop + vh / 2) / denom));
          const pct = Math.round(progress * 100);

          const done = marks.get(sec.id);
          points.forEach(p => {
            if (pct >= p && !done.has(p)) {
              done.add(p);
              window.dataLayer.push({ event: 'section_scrolldepth', section: sec.id, percent: p });
            }
          });
        });
      }

      let ticking = false;
      function onScroll() {
        if (!ticking) {
          ticking = true;
          requestAnimationFrame(() => { checkSectionDepth(); ticking = false; });
        }
      }

      window.addEventListener('scroll', onScroll, { passive: true });
      window.addEventListener('resize', () => checkSectionDepth(), { passive: true });
      checkSectionDepth(); // initial
    })();
  </script>
</body>
</html>
